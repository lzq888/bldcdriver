EESchema Schematic File Version 2  date Sun 19 Apr 2015 17:02:55 MST
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:special
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:bldc-cache
LIBS:bldc-cache
EELAYER 25  0
EELAYER END
$Descr A4 11700 8267
encoding utf-8
Sheet 3 4
Title ""
Date "19 apr 2015"
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
Wire Wire Line
	3000 2400 3000 2350
Wire Wire Line
	4350 4700 4500 4700
Wire Wire Line
	4350 3800 4500 3800
Wire Wire Line
	4350 3400 4500 3400
Wire Wire Line
	4350 3200 4500 3200
Wire Wire Line
	4350 2500 4500 2500
Wire Wire Line
	7050 4950 6950 4950
Wire Wire Line
	7050 5150 6950 5150
Connection ~ 5150 4900
Wire Wire Line
	5300 4900 4350 4900
Wire Wire Line
	2800 1800 3250 1800
Wire Wire Line
	4350 3600 4500 3600
Wire Wire Line
	4350 3500 4500 3500
Wire Wire Line
	4350 2400 4500 2400
Wire Wire Line
	3250 5000 3200 5000
Wire Wire Line
	3250 4900 3200 4900
Wire Wire Line
	3250 3650 3100 3650
Wire Wire Line
	3250 2300 3100 2300
Wire Wire Line
	4350 4300 4500 4300
Wire Wire Line
	4350 4400 4500 4400
Wire Wire Line
	4350 5100 4500 5100
Wire Wire Line
	4350 4000 4500 4000
Wire Wire Line
	4350 2800 4500 2800
Wire Wire Line
	4350 2200 4500 2200
Wire Wire Line
	4350 2300 4500 2300
Wire Wire Line
	4350 2900 4500 2900
Wire Wire Line
	4350 3100 4500 3100
Wire Wire Line
	4350 4500 4500 4500
Wire Wire Line
	4350 4600 4500 4600
Wire Wire Line
	3100 2300 3100 1750
Connection ~ 3100 1800
Wire Wire Line
	3100 4050 3100 4100
Wire Wire Line
	3200 4900 3200 5050
Connection ~ 3200 5000
Wire Wire Line
	4350 2700 4500 2700
Wire Wire Line
	4350 4200 4500 4200
Wire Wire Line
	3150 2800 3150 2850
Connection ~ 9250 2250
Wire Wire Line
	9050 2250 9500 2250
Wire Wire Line
	9500 2250 9500 2300
Wire Wire Line
	8450 2950 8300 2950
Wire Wire Line
	9250 3150 9250 3200
Wire Wire Line
	9250 1750 9250 1700
Wire Wire Line
	9500 2700 9500 2750
Wire Wire Line
	9500 2750 9250 2750
Wire Wire Line
	2950 6600 2850 6600
Wire Wire Line
	4800 6600 4900 6600
Wire Wire Line
	3700 6700 3450 6700
Wire Wire Line
	3450 6400 3450 6500
Wire Wire Line
	4300 6400 4300 6500
Wire Wire Line
	4300 6500 4000 6500
Wire Wire Line
	3450 6500 3700 6500
Wire Wire Line
	4000 6700 4300 6700
Wire Wire Line
	4000 6600 4300 6600
Wire Wire Line
	4300 6700 4300 6800
Wire Wire Line
	3450 6600 3700 6600
Wire Wire Line
	3450 6700 3450 6800
Wire Wire Line
	2950 6400 2850 6400
Wire Wire Line
	3450 6800 3350 6800
Wire Wire Line
	7050 5050 6950 5050
Wire Wire Line
	6950 5150 6950 5200
Connection ~ 3150 2400
Wire Wire Line
	3250 2400 2800 2400
Wire Wire Line
	4350 2600 4500 2600
Wire Wire Line
	4350 3300 4500 3300
Wire Wire Line
	4350 3700 4500 3700
Wire Wire Line
	4350 4100 4500 4100
Wire Wire Line
	4350 5000 4500 5000
Connection ~ 3000 2400
$Comp
L +5VA #PWR23
U 1 1 553437E9
P 3000 2350
F 0 "#PWR23" H 3000 2480 20  0001 C CNN
F 1 "+5VA" H 3000 2450 30  0000 C CNN
	1    3000 2350
	1    0    0    -1  
$EndComp
NoConn ~ 4500 5000
NoConn ~ 4500 4700
NoConn ~ 4500 4100
NoConn ~ 4500 3800
NoConn ~ 4500 3700
NoConn ~ 4500 3400
NoConn ~ 4500 3300
NoConn ~ 4500 3200
NoConn ~ 4500 2600
NoConn ~ 4500 2500
$Comp
L GND #PWR29
U 1 1 553400C3
P 6950 5200
F 0 "#PWR29" H 6950 5200 30  0001 C CNN
F 1 "GND" H 6950 5130 30  0001 C CNN
	1    6950 5200
	1    0    0    -1  
$EndComp
Text Label 6950 5050 2    40   ~ 0
UART_RX
Text Label 6950 4950 2    40   ~ 0
UART_TX
$Comp
L CONN_3 K1
U 1 1 553400A6
P 7400 5050
F 0 "K1" V 7350 5050 50  0000 C CNN
F 1 "CONN_3" V 7450 5050 40  0000 C CNN
	1    7400 5050
	1    0    0    -1  
$EndComp
Text Label 4500 4400 0    40   ~ 0
UART_RX
Text Label 4500 4300 0    40   ~ 0
UART_TX
$Comp
L AVR-ISP-6 J6
U 1 1 5533F784
P 3850 6600
F 0 "J6" H 3700 6850 50  0000 C CNN
F 1 "AVR-ISP-6" H 3600 6325 50  0000 L BNN
F 2 "AVR-ISP-6" V 3350 6600 50  0001 C CNN
	1    3850 6600
	1    0    0    -1  
$EndComp
$Comp
L R R19
U 1 1 5533F783
P 4550 6600
F 0 "R19" V 4630 6600 50  0000 C CNN
F 1 "10.2K" V 4550 6600 50  0000 C CNN
	1    4550 6600
	0    1    1    0   
$EndComp
$Comp
L R R17
U 1 1 5533F782
P 3200 6400
F 0 "R17" V 3280 6400 50  0000 C CNN
F 1 "10.2K" V 3200 6400 50  0000 C CNN
	1    3200 6400
	0    1    1    0   
$EndComp
$Comp
L R R18
U 1 1 5533F781
P 3200 6600
F 0 "R18" V 3280 6600 50  0000 C CNN
F 1 "10.2K" V 3200 6600 50  0000 C CNN
	1    3200 6600
	0    1    1    0   
$EndComp
Text Label 4900 6600 0    40   ~ 0
UART_TX
Text Label 2850 6400 2    40   ~ 0
BATT_PWM
Text Label 2850 6600 2    40   ~ 0
UART_RX
Text Label 3350 6800 2    40   ~ 0
nRESET
$Comp
L +5V #PWR31
U 1 1 5533F780
P 4300 6400
F 0 "#PWR31" H 4300 6490 20  0001 C CNN
F 1 "+5V" H 4300 6490 30  0000 C CNN
	1    4300 6400
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR32
U 1 1 5533F77F
P 4300 6800
F 0 "#PWR32" H 4300 6800 30  0001 C CNN
F 1 "GND" H 4300 6730 30  0001 C CNN
	1    4300 6800
	1    0    0    -1  
$EndComp
$Comp
L R R13
U 1 1 5533F76A
P 9250 2000
F 0 "R13" V 9330 2000 50  0000 C CNN
F 1 "57.6K" V 9250 2000 50  0000 C CNN
	1    9250 2000
	1    0    0    -1  
$EndComp
$Comp
L R R14
U 1 1 5533F769
P 9250 2500
F 0 "R14" V 9330 2500 50  0000 C CNN
F 1 "10.2K" V 9250 2500 50  0000 C CNN
	1    9250 2500
	1    0    0    -1  
$EndComp
$Comp
L NPN Q1
U 1 1 5533F768
P 9150 2950
F 0 "Q1" H 9150 2800 50  0000 R CNN
F 1 "2N3904" H 9150 3100 50  0000 R CNN
	1    9150 2950
	1    0    0    -1  
$EndComp
$Comp
L R R15
U 1 1 5533F767
P 8700 2950
F 0 "R15" V 8780 2950 50  0000 C CNN
F 1 "1K" V 8700 2950 50  0000 C CNN
	1    8700 2950
	0    1    1    0   
$EndComp
$Comp
L GND #PWR25
U 1 1 5533F766
P 9250 3200
F 0 "#PWR25" H 9250 3200 30  0001 C CNN
F 1 "GND" H 9250 3130 30  0001 C CNN
	1    9250 3200
	1    0    0    -1  
$EndComp
$Comp
L +BATT #PWR20
U 1 1 5533F765
P 9250 1700
F 0 "#PWR20" H 9250 1650 20  0001 C CNN
F 1 "+BATT" H 9250 1800 30  0000 C CNN
	1    9250 1700
	1    0    0    -1  
$EndComp
$Comp
L C C12
U 1 1 5533F764
P 9500 2500
F 0 "C12" H 9550 2600 50  0000 L CNN
F 1 "1000pF" H 9550 2400 50  0000 L CNN
F 2 "0805" H 9500 2500 60  0001 C CNN
F 4 "CL21C151JBANNNC" H 9500 2500 60  0001 C CNN "Mfg P/N"
F 5 "1276-1828-1-ND" H 9500 2500 60  0001 C CNN "Digikey P/N"
	1    9500 2500
	1    0    0    -1  
$EndComp
Text Label 9050 2250 2    40   ~ 0
BATT_SENSE
Text Label 8300 2950 2    40   ~ 0
BATT_PWM
Text Label 5300 4900 0    40   ~ 0
nRESET
Text HLabel 4500 5100 2    40   Input ~ 0
U_CURR_SENSE
Text HLabel 4500 4600 2    40   Input ~ 0
W_CURR_SENSE
Text HLabel 4500 4500 2    40   Input ~ 0
V_CURR_SENSE
Text HLabel 4500 3500 2    40   Input ~ 0
W_BEMF_SENSE
Text HLabel 4500 2700 2    40   Input ~ 0
V_BEMF_SENSE
Text HLabel 4500 2400 2    40   Input ~ 0
U_BEMF_SENSE
Text HLabel 4500 4000 2    40   Output ~ 0
U_HI
Text HLabel 4500 3100 2    40   Output ~ 0
V_HI
Text HLabel 4500 2900 2    40   Output ~ 0
U_LO
Text HLabel 4500 2800 2    40   Output ~ 0
V_LO
Text HLabel 4500 2300 2    40   Output ~ 0
W_LO
Text HLabel 4500 2200 2    40   Output ~ 0
W_HI
$Comp
L ATMEGA64C1 U4
U 1 1 5533F45D
P 3800 3650
F 0 "U4" H 3600 5200 60  0000 C CNN
F 1 "ATMEGA64M1" H 3800 2100 60  0000 C CNN
	1    3800 3650
	1    0    0    -1  
$EndComp
$Comp
L INDUCTOR L1
U 1 1 5533F45C
P 2800 2100
F 0 "L1" V 2750 2100 40  0000 C CNN
F 1 "Ferrite Bead" V 2900 2100 40  0000 C CNN
F 2 "0805" H 2800 2100 60  0001 C CNN
	1    2800 2100
	1    0    0    -1  
$EndComp
$Comp
L C C14
U 1 1 5533F45B
P 3100 3850
F 0 "C14" H 3150 3950 50  0000 L CNN
F 1 "0.1uF" H 3150 3750 50  0000 L CNN
F 2 "0805" H 3100 3850 60  0001 C CNN
F 4 "CL21C151JBANNNC" H 3100 3850 60  0001 C CNN "Mfg P/N"
F 5 "1276-1828-1-ND" H 3100 3850 60  0001 C CNN "Digikey P/N"
	1    3100 3850
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR28
U 1 1 5533F45A
P 3200 5050
F 0 "#PWR28" H 3200 5050 30  0001 C CNN
F 1 "GND" H 3200 4980 30  0001 C CNN
	1    3200 5050
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR26
U 1 1 5533F459
P 3100 4100
F 0 "#PWR26" H 3100 4100 30  0001 C CNN
F 1 "GND" H 3100 4030 30  0001 C CNN
	1    3100 4100
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR21
U 1 1 5533F458
P 3100 1750
F 0 "#PWR21" H 3100 1840 20  0001 C CNN
F 1 "+5V" H 3100 1840 30  0000 C CNN
	1    3100 1750
	1    0    0    -1  
$EndComp
Text Label 4500 3600 0    40   ~ 0
BATT_SENSE
Text Label 4500 4200 0    40   ~ 0
BATT_PWM
$Comp
L C C11
U 1 1 5533F457
P 3250 2000
F 0 "C11" H 3300 2100 50  0000 L CNN
F 1 "0.1uF" H 3300 1900 50  0000 L CNN
F 2 "0805" H 3250 2000 60  0001 C CNN
F 4 "CL21C151JBANNNC" H 3250 2000 60  0001 C CNN "Mfg P/N"
F 5 "1276-1828-1-ND" H 3250 2000 60  0001 C CNN "Digikey P/N"
	1    3250 2000
	1    0    0    1   
$EndComp
$Comp
L C C13
U 1 1 5533F456
P 3150 2600
F 0 "C13" H 3200 2700 50  0000 L CNN
F 1 "0.1uF" H 3200 2500 50  0000 L CNN
F 2 "0805" H 3150 2600 60  0001 C CNN
F 4 "CL21C151JBANNNC" H 3150 2600 60  0001 C CNN "Mfg P/N"
F 5 "1276-1828-1-ND" H 3150 2600 60  0001 C CNN "Digikey P/N"
	1    3150 2600
	-1   0    0    1   
$EndComp
$Comp
L GND #PWR24
U 1 1 5533F455
P 3150 2850
F 0 "#PWR24" H 3150 2850 30  0001 C CNN
F 1 "GND" H 3150 2780 30  0001 C CNN
	1    3150 2850
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR22
U 1 1 5533F454
P 3250 2200
F 0 "#PWR22" H 3250 2200 30  0001 C CNN
F 1 "GND" H 3250 2130 30  0001 C CNN
	1    3250 2200
	1    0    0    -1  
$EndComp
$Comp
L R R16
U 1 1 5533F453
P 5150 4650
F 0 "R16" V 5230 4650 50  0000 C CNN
F 1 "10.2K" V 5150 4650 50  0000 C CNN
	1    5150 4650
	-1   0    0    1   
$EndComp
$Comp
L C C15
U 1 1 5533F452
P 5150 5100
F 0 "C15" H 5200 5200 50  0000 L CNN
F 1 "1000pF" H 5200 5000 50  0000 L CNN
F 2 "0805" H 5150 5100 60  0001 C CNN
F 4 "CL21C151JBANNNC" H 5150 5100 60  0001 C CNN "Mfg P/N"
F 5 "1276-1828-1-ND" H 5150 5100 60  0001 C CNN "Digikey P/N"
	1    5150 5100
	1    0    0    -1  
$EndComp
$Comp
L +5V #PWR27
U 1 1 5533F451
P 5150 4400
F 0 "#PWR27" H 5150 4490 20  0001 C CNN
F 1 "+5V" H 5150 4490 30  0000 C CNN
	1    5150 4400
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR30
U 1 1 5533F450
P 5150 5300
F 0 "#PWR30" H 5150 5300 30  0001 C CNN
F 1 "GND" H 5150 5230 30  0001 C CNN
	1    5150 5300
	1    0    0    -1  
$EndComp
$EndSCHEMATC
